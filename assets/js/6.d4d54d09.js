(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{175:function(t,e,r){"use strict";r.r(e);r(32),r(33),r(74),r(75),r(162),r(25),r(27),r(70),r(77),r(34),r(123);var n=r(68),a=(r(166),r(167)),s=r(169),o=r(170),c=(r(168),s.geoEquirectangular().scale(1e3).translate([-1650,120])),i=s.geoPath().projection(c),l=s.scaleQuantize([0,1e4],s.schemeBlues[7]),u={data:function(){return{currentYear:2018,yearRange:[2011,2012,2013,2014,2015,2016,2017,2018]}},mounted:function(){var t=this;this.currentYear=window.location.hash.replace("#","")||this.yearRange.pop(),this.fetchResources().then(function(){var e=Object(a.a)(regeneratorRuntime.mark((function e(r){var a,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(n.a)(r,2),s=a[0],c=a[1],e.next=3,t.transformToMap(c);case 3:return l=e.sent,e.t0=t,e.t1=t,e.next=8,s.json();case 8:e.t2=e.sent,e.t3=l,e.t4=i,e.t5=e.t1.render.call(e.t1,e.t2,e.t3,e.t4),e.t0.renderLegend.call(e.t0,e.t5),Object(o.a)(".province",{followCursor:!0,plugins:[o.b],content:function(t){return t.getAttribute("data-tooltip")}});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},methods:{render:function(t,e,r){var n=s.select("#content").append("svg").attr("viewBox",[0,0,800,400]);return n.append("g").selectAll("path").data(t.features).join("path").attr("fill",(function(t){return l(e.get(t.properties.slug))})).attr("data-name",(function(t){return t.properties.state})).attr("data-tooltip",(function(t){return"".concat(t.properties.state," ").concat(e.get(t.properties.slug))})).attr("stroke","#22292f").attr("stroke-linejoin","round").attr("d",r).attr("id",(function(t){return t.properties.slug})).attr("class","province").on("mouseover",(function(){n.selectAll(".province").transition().style("opacity",.5).attr("stroke","#22292f"),s.select(this).transition().style("opacity",1).attr("stroke","black")})).on("mouseleave",(function(){n.selectAll(".province").transition().style("opacity",1).attr("stroke","#22292f")})),n},renderLegend:function(t){var e=t.append("defs").append("linearGradient").attr("id","linear-gradient").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%"),r=[0,1500,3e3,4500,6e3,7500,9e3,1e4];e.selectAll("stop").data(r).join("stop").attr("offset",(function(t,e){return"".concat(Math.floor((e+1)/r.length*100),"%")})).attr("stop-color",(function(t){return l(t)}));var n=t.append("g").style("transform","translate(calc(50% - 150px), 375px)");n.append("rect").attr("width",300).attr("height",5).style("fill","url(#linear-gradient)");var a=r.slice(0,r.length-1),s=n.append("g").attr("transform","translate(-35, 20)");return a.forEach((function(t,e){e%2==0&&s.append("text").attr("x",Math.floor((e+1)/r.length*300)).attr("y",0).style("text-anchor","middle").style("fill","#edf2f7").attr("class","legend-stop").text(t)})),n.append("text").style("text-anchor","middle").style("fill","#edf2f7").attr("x",150).attr("y",-12).attr("id","legend-title").text("Number of cases"),t},getResourceUrl:function(t){return this.$devMode?t:this.$url(t)},fetchResources:function(){var t=this.getResourceUrl("/id.geojson"),e=this.getResourceUrl("/dengue-indonesia-".concat(this.currentYear,".csv"));return Promise.all([fetch(t),fetch(e)])},goYear:function(t){this.currentYear=t,this.rerender(this.currentYear)},rerender:function(t){var e=this;return Object(a.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.getResourceUrl("/dengue-indonesia-".concat(t,".csv")),r.t0=e,r.next=4,fetch(n);case 4:return r.t1=r.sent,r.next=7,r.t0.transformToMap.call(r.t0,r.t1);case 7:r.sent.forEach((function(t,e){var r=s.select("#".concat(e));if(r){r.transition().attr("fill",l(t));try{document.getElementById("".concat(e))._tippy.setContent("".concat(r.attr("data-name")," ").concat(t))}catch(t){console.log(e)}}}));case 9:case"end":return r.stop()}}),r)})))()},transformToMap:function(t){return Object(a.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Map,e.t1=s,e.next=4,t.text();case 4:return e.t2=e.sent,e.t3=function(t){return[t.slug,+t.total_cases]},e.t4=e.t1.csvParse.call(e.t1,e.t2,e.t3),e.abrupt("return",new e.t0(e.t4));case 8:case"end":return e.stop()}}),e)})))()}}},p=r(29),f=Object(p.a)(u,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"max-w-4xl mt-10 mb-20 mx-auto overflow-x-auto"},[r("p",{staticClass:"font-semibold text-2xl text-center pt-4 mb-4",attrs:{id:"title"}},[t._v("Cases of Dengue Fever in Indonesia ("+t._s(t.currentYear)+")")]),r("div",{staticClass:"text-center"},t._l(t.yearRange,(function(e){return r("span",{key:"link-"+e,staticClass:"inline-block mx-1 mb-1"},[r("a",{staticClass:"underline text-lg text-blue-500 active:text-blue-300 focus:text-blue-300 visited:text-blue-300",attrs:{href:"#"+e},on:{click:function(r){return t.goYear(e)}}},[t._v("\n         "+t._s(e)+"\n      ")])])})),0),r("div",{staticClass:"min-w-xl",attrs:{id:"content"}})])}),[],!1,null,null,null);e.default=f.exports}}]);