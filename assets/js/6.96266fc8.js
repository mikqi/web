(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{175:function(t,e,n){"use strict";n.r(e);n(32),n(33),n(74),n(75),n(162),n(25),n(27),n(70),n(77),n(34),n(123);var r=n(68),a=(n(166),n(167)),o=n(169),s=n(170),c=(n(168),o.geoEquirectangular().scale(1e3).translate([-1650,120])),i=o.geoPath().projection(c),l=o.scaleQuantize([0,1e4],o.schemeBlues[7]),u={data:function(){return{currentYear:2018,yearRange:[2011,2012,2013,2014,2015,2016,2017,2018]}},mounted:function(){var t=this;this.currentYear=window.location.hash.replace("#","")||this.yearRange.pop(),this.fetchResources().then(function(){var e=Object(a.a)(regeneratorRuntime.mark((function e(n){var a,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(r.a)(n,2),o=a[0],c=a[1],e.next=3,t.transformToMap(c);case 3:return l=e.sent,e.t0=t,e.t1=t,e.next=8,o.json();case 8:e.t2=e.sent,e.t3=l,e.t4=i,e.t5=e.t1.render.call(e.t1,e.t2,e.t3,e.t4),e.t0.renderLegend.call(e.t0,e.t5),Object(s.a)(".province",{followCursor:!0,plugins:[s.b],content:function(t){return t.getAttribute("data-tooltip")}});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},methods:{render:function(t,e,n){var r=o.select("#content").append("svg").attr("viewBox",[0,0,800,400]);return r.append("g").selectAll("path").data(t.features).join("path").attr("fill",(function(t){return l(e.get(t.properties.slug))})).attr("data-name",(function(t){return t.properties.state})).attr("data-tooltip",(function(t){return"".concat(t.properties.state," ").concat(e.get(t.properties.slug))})).attr("stroke","#22292f").attr("stroke-linejoin","round").attr("d",n).attr("id",(function(t){return t.properties.slug})).attr("class","province").on("mouseover",(function(){r.selectAll(".province").transition().style("opacity",.5).attr("stroke","#22292f"),o.select(this).transition().style("opacity",1).attr("stroke","black")})).on("mouseleave",(function(){r.selectAll(".province").transition().style("opacity",1).attr("stroke","#22292f")})),r},renderLegend:function(t){var e=t.append("defs").append("linearGradient").attr("id","linear-gradient").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%"),n=[0,1500,3e3,4500,6e3,7500,9e3,1e4];e.selectAll("stop").data(n).join("stop").attr("offset",(function(t,e){return"".concat(Math.floor((e+1)/n.length*100),"%")})).attr("stop-color",(function(t){return l(t)}));var r=t.append("g").style("transform","translate(calc(50% - 150px), 375px)");r.append("rect").attr("width",300).attr("height",5).style("fill","url(#linear-gradient)");var a=n.slice(0,n.length-1),o=r.append("g").attr("transform","translate(-35, 20)");return a.forEach((function(t,e){e%2==0&&o.append("text").attr("x",Math.floor((e+1)/n.length*300)).attr("y",0).style("text-anchor","middle").style("fill","#edf2f7").attr("class","legend-stop").text(t)})),r.append("text").style("text-anchor","middle").style("fill","#edf2f7").attr("x",150).attr("y",-12).attr("id","legend-title").text("Number of cases"),t},fetchResources:function(){return Promise.all([fetch("/id.geojson"),fetch("/dengue-indonesia-2018.csv")])},goYear:function(t){this.currentYear=t,this.rerender(this.currentYear)},rerender:function(t){var e=this;return Object(a.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=e,n.next=3,fetch("/dengue-indonesia-".concat(t,".csv"));case 3:return n.t1=n.sent,n.next=6,n.t0.transformToMap.call(n.t0,n.t1);case 6:n.sent.forEach((function(t,e){var n=o.select("#".concat(e));if(n){n.transition().attr("fill",l(t));try{document.getElementById("".concat(e))._tippy.setContent("".concat(n.attr("data-name")," ").concat(t))}catch(t){console.log(e)}}}));case 8:case"end":return n.stop()}}),n)})))()},transformToMap:function(t){return Object(a.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Map,e.t1=o,e.next=4,t.text();case 4:return e.t2=e.sent,e.t3=function(t){return[t.slug,+t.total_cases]},e.t4=e.t1.csvParse.call(e.t1,e.t2,e.t3),e.abrupt("return",new e.t0(e.t4));case 8:case"end":return e.stop()}}),e)})))()}}},p=n(29),f=Object(p.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"max-w-4xl mt-10 mb-20 mx-auto overflow-x-auto"},[n("p",{staticClass:"font-semibold text-2xl text-center pt-4 mb-4",attrs:{id:"title"}},[t._v("Cases of Dengue Fever in Indonesia ("+t._s(t.currentYear)+")")]),n("div",{staticClass:"text-center"},t._l(t.yearRange,(function(e){return n("span",{key:"link-"+e,staticClass:"inline-block mx-1 mb-1"},[n("a",{staticClass:"underline text-lg text-blue-500 active:text-blue-300 focus:text-blue-300 visited:text-blue-300",attrs:{href:"#"+e},on:{click:function(n){return t.goYear(e)}}},[t._v("\n         "+t._s(e)+"\n      ")])])})),0),n("div",{staticClass:"min-w-xl",attrs:{id:"content"}})])}),[],!1,null,null,null);e.default=f.exports}}]);